(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{1767:function(e,t,a){"use strict";var n=a(53),r=a.n(n),c="[E-COMMERCE APP] GET PRODUCTS",o="[E-COMMERCE APP] SET PRODUCTS SEARCH TEXT";function l(){var e=r.a.get("/api/e-commerce-app/products");return function(t){return e.then(function(e){return t({type:c,payload:e.data})})}}function i(e){return{type:o,searchText:e.target.value}}var s=a(4),d=a(50),u="[E-COMMERCE APP] GET PRODUCT",m="[E-COMMERCE APP] SAVE PRODUCT";function p(e){var t=r.a.get("/api/e-commerce-app/product",{params:e});return function(e){return t.then(function(t){return e({type:u,payload:t.data})})}}function h(e){var t=r.a.post("/api/e-commerce-app/product/save",e);return function(e){return t.then(function(t){return e(Object(d.H)({message:"Product Saved"})),e({type:m,payload:t.data})})}}function f(){var e={id:s.A.generateGUID(),name:"",handle:"",description:"",categories:[],tags:[],images:[],priceTaxExcl:0,priceTaxIncl:0,taxRate:0,comparedPrice:0,quantity:0,sku:"",width:"",height:"",depth:"",weight:"",extraShippingFee:0,active:!0};return{type:u,payload:e}}var g="[E-COMMERCE APP] GET ORDERS",b="[E-COMMERCE APP] SET ORDERS SEARCH TEXT";function E(){var e=r.a.get("/api/e-commerce-app/orders");return function(t){return e.then(function(e){return t({type:g,payload:e.data})})}}function v(e){return{type:b,searchText:e.target.value}}var y="[E-COMMERCE APP] GET ORDER",x="[E-COMMERCE APP] SAVE ORDER";function w(e){var t=r.a.get("/api/e-commerce-app/order",{params:e});return function(e){return t.then(function(t){return e({type:y,payload:t.data})})}}function O(e){var t=r.a.post("/api/e-commerce-app/order/save",e);return function(e){return t.then(function(t){return e(Object(d.H)({message:"Order Saved"})),e({type:x,payload:t.data})})}}a.d(t,"d",function(){return c}),a.d(t,"h",function(){return o}),a.d(t,"l",function(){return l}),a.d(t,"q",function(){return i}),a.d(t,"c",function(){return u}),a.d(t,"f",function(){return m}),a.d(t,"k",function(){return p}),a.d(t,"o",function(){return h}),a.d(t,"m",function(){return f}),a.d(t,"b",function(){return g}),a.d(t,"g",function(){return b}),a.d(t,"j",function(){return E}),a.d(t,"p",function(){return v}),a.d(t,"a",function(){return y}),a.d(t,"e",function(){return x}),a.d(t,"i",function(){return w}),a.d(t,"n",function(){return O})},1782:function(e,t,a){"use strict";var n=a(19),r=a(6),c=a(1767),o={data:[],searchText:""},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.d:return Object(r.a)({},e,{data:t.payload});case c.h:return Object(r.a)({},e,{searchText:t.searchText});default:return e}},i={data:null},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.c:case c.f:return Object(r.a)({},e,{data:t.payload});default:return e}},d={data:[],searchText:""},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.b:return Object(r.a)({},e,{data:t.payload});case c.g:return Object(r.a)({},e,{searchText:t.searchText});default:return e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.a:case c.e:return Object(r.a)({},t.payload);default:return e}},p=Object(n.d)({products:l,product:s,orders:u,order:m});t.a=p},1824:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(5),o=a.n(c),l=a(9),i=[{id:1,name:"Awaiting check payment",color:"bg-blue text-white"},{id:2,name:"Payment accepted",color:"bg-green text-white"},{id:3,name:"Preparing the order",color:"bg-orange text-black"},{id:4,name:"Shipped",color:"bg-purple text-white"},{id:5,name:"Delivered",color:"bg-green-dark text-white"},{id:6,name:"Canceled",color:"bg-pink text-white"},{id:7,name:"Refunded",color:"bg-red text-white"},{id:8,name:"Payment error",color:"bg-red-dark text-white"},{id:9,name:"On pre-order (paid)",color:"bg-purple-light text-white"},{id:10,name:"Awaiting bank wire payment",color:"bg-blue text-white"},{id:11,name:"Awaiting PayPal payment",color:"bg-blue-dark text-white"},{id:12,name:"Remote payment accepted",color:"bg-green-darker text-white"},{id:13,name:"On pre-order (not paid)",color:"bg-purple-dark text-white"},{id:14,name:"Awaiting Cash-on-delivery payment",color:"bg-blue-darker text-white"}];t.a=function(e){var t=e.name;return r.a.createElement("div",{className:o()("inline text-12 p-4 rounded truncate",l.a.find(i,{name:t}).color)},t)}},2655:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),o=a(290),l=a(1),i=a(59),s=a(1767),d=a(19),u=a(20);var m=Object(u.b)(function(e){var t=e.eCommerceApp,a=e.fuse;return{searchText:t.orders.searchText,mainTheme:a.settings.mainTheme}},function(e){return Object(d.c)({setSearchText:s.p},e)})(function(e){var t=e.setSearchText,a=e.searchText,n=e.mainTheme;return r.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(c.d,{animation:"transition.expandIn",delay:300},r.a.createElement(l.G,{className:"text-32 mr-0 sm:mr-12"},"shopping_basket")),r.a.createElement(c.d,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(l.vb,{className:"hidden sm:flex",variant:"h6"},"Orders"))),r.a.createElement("div",{className:"flex flex-1 items-center justify-center pr-0 pl-12 sm:px-12"},r.a.createElement(i.MuiThemeProvider,{theme:n},r.a.createElement(c.d,{animation:"transition.slideDownIn",delay:300},r.a.createElement(l.W,{className:"flex items-center w-full max-w-512 px-8 py-4 rounded-8",elevation:1},r.a.createElement(l.G,{className:"mr-8",color:"action"},"search"),r.a.createElement(l.I,{placeholder:"Search",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:a,inputProps:{"aria-label":"Search"},onChange:t}))))))}),p=a(12),h=a(13),f=a(15),g=a(14),b=a(16),E=a(109),v=a(27),y=a(9),x=a(5),w=a.n(x),O=[{id:"id",align:"left",disablePadding:!1,label:"ID",sort:!0},{id:"reference",align:"left",disablePadding:!1,label:"Reference",sort:!0},{id:"customer",align:"left",disablePadding:!1,label:"Customer",sort:!0},{id:"total",align:"right",disablePadding:!1,label:"Total",sort:!0},{id:"payment",align:"left",disablePadding:!1,label:"Payment",sort:!0},{id:"status",align:"left",disablePadding:!1,label:"Status",sort:!0},{id:"date",align:"left",disablePadding:!1,label:"Date",sort:!0}],P=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={selectedOrdersMenu:null},a.createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a.openSelectedOrdersMenu=function(e){a.setState({selectedOrdersMenu:e.currentTarget})},a.closeSelectedOrdersMenu=function(){a.setState({selectedOrdersMenu:null})},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.onSelectAllClick,n=t.order,c=t.orderBy,o=t.numSelected,i=t.rowCount,s=t.classes,d=this.state.selectedOrdersMenu;return r.a.createElement(l.nb,null,r.a.createElement(l.pb,{className:"h-64"},r.a.createElement(l.mb,{padding:"checkbox",className:"relative pl-4 sm:pl-12"},r.a.createElement(l.h,{indeterminate:o>0&&o<i,checked:o===i,onChange:a}),o>0&&r.a.createElement("div",{className:w()("flex items-center justify-center absolute w-64 pin-t pin-l ml-68 h-64 z-10",s.actionsButtonWrapper)},r.a.createElement(l.H,{"aria-owns":d?"selectedOrdersMenu":null,"aria-haspopup":"true",onClick:this.openSelectedOrdersMenu},r.a.createElement(l.G,null,"more_horiz")),r.a.createElement(l.S,{id:"selectedOrdersMenu",anchorEl:d,open:Boolean(d),onClose:this.closeSelectedOrdersMenu},r.a.createElement(l.U,null,r.a.createElement(l.T,{onClick:function(){e.closeSelectedOrdersMenu()}},r.a.createElement(l.O,{className:s.icon},r.a.createElement(l.G,null,"delete")),r.a.createElement(l.Q,{inset:!0,primary:"Remove"})))))),O.map(function(t){return r.a.createElement(l.mb,{key:t.id,align:t.align,padding:t.disablePadding?"none":"default",sortDirection:c===t.id&&n},t.sort&&r.a.createElement(l.ub,{title:"Sort",placement:"right"===t.align?"bottom-end":"bottom-start",enterDelay:300},r.a.createElement(l.qb,{active:c===t.id,direction:n,onClick:e.createSortHandler(t.id)},t.label)))},this)))}}]),t}(n.Component),C=Object(i.withStyles)(function(e){return{actionsButtonWrapper:{background:e.palette.background.paper}}},{withTheme:!0})(P),S=a(1824),k=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={order:"asc",orderBy:"id",selected:[],data:a.props.orders,page:0,rowsPerPage:10},a.getFilteredArray=function(e,t){return 0===t.length?e:c.A.filterArrayByString(e,t)},a.handleRequestSort=function(e,t){var n=t,r="desc";a.state.orderBy===t&&"desc"===a.state.order&&(r="asc"),a.setState({order:r,orderBy:n})},a.handleSelectAllClick=function(e){e.target.checked?a.setState(function(e){return{selected:a.state.data.map(function(e){return e.id})}}):a.setState({selected:[]})},a.handleClick=function(e){a.props.history.push("/apps/e-commerce/orders/"+e.id)},a.handleCheck=function(e,t){var n=a.state.selected,r=n.indexOf(t),c=[];-1===r?c=c.concat(n,t):0===r?c=c.concat(n.slice(1)):r===n.length-1?c=c.concat(n.slice(0,-1)):r>0&&(c=c.concat(n.slice(0,r),n.slice(r+1))),a.setState({selected:c})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.getOrders()}},{key:"componentDidUpdate",value:function(e,t){if(!y.a.isEqual(this.props.orders,e.orders)||!y.a.isEqual(this.props.searchText,e.searchText)){var a=this.getFilteredArray(this.props.orders,this.props.searchText);this.setState({data:a})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.order,n=t.orderBy,o=t.selected,i=t.rowsPerPage,s=t.page,d=t.data;return r.a.createElement("div",{className:"w-full flex flex-col"},r.a.createElement(c.t,{className:"flex-grow overflow-x-auto"},r.a.createElement(l.kb,{className:"min-w-xl","aria-labelledby":"tableTitle"},r.a.createElement(C,{numSelected:o.length,order:a,orderBy:n,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,rowCount:d.length}),r.a.createElement(l.lb,null,y.a.orderBy(d,[function(e){switch(n){case"id":return parseInt(e.id,10);case"customer":return e.customer.firstName;case"payment":return e.payment.method;case"status":return e.status[0].name;default:return e[n]}}],[a]).slice(s*i,s*i+i).map(function(t){var a=e.isSelected(t.id);return r.a.createElement(l.pb,{className:"h-64 cursor-pointer",hover:!0,role:"checkbox","aria-checked":a,tabIndex:-1,key:t.id,selected:a,onClick:function(a){return e.handleClick(t)}},r.a.createElement(l.mb,{className:"w-48 pl-4 sm:pl-12",padding:"checkbox"},r.a.createElement(l.h,{checked:a,onClick:function(e){return e.stopPropagation()},onChange:function(a){return e.handleCheck(a,t.id)}})),r.a.createElement(l.mb,{component:"th",scope:"row"},t.id),r.a.createElement(l.mb,{component:"th",scope:"row"},t.reference),r.a.createElement(l.mb,{className:"truncate",component:"th",scope:"row"},t.customer.firstName+" "+t.customer.lastName),r.a.createElement(l.mb,{component:"th",scope:"row",align:"right"},r.a.createElement("span",null,"$"),t.total),r.a.createElement(l.mb,{component:"th",scope:"row"},t.payment.method),r.a.createElement(l.mb,{component:"th",scope:"row"},r.a.createElement(S.a,{name:t.status[0].name})),r.a.createElement(l.mb,{component:"th",scope:"row"},t.date))})))),r.a.createElement(l.ob,{component:"div",count:d.length,rowsPerPage:i,page:s,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),t}(n.Component);var T=Object(E.g)(Object(v.a)(function(e){var t=e.eCommerceApp;return{orders:t.orders.data,searchText:t.orders.searchText}},function(e){return Object(d.c)({getOrders:s.j},e)})(k)),R=a(1782);t.default=Object(o.a)("eCommerceApp",R.a)(function(){return r.a.createElement(c.r,{classes:{content:"flex",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:r.a.createElement(m,null),content:r.a.createElement(T,null),innerScroll:!0})})}}]);