(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{2654:function(e,t,a){"use strict";a.r(t);var n=a(12),r=a(13),i=a(15),o=a(14),s=a(16),c=a(36),l=a(6),d=a(0),u=a.n(d),m=a(1),b=a(59),p=a(4),g=a(1931),h=a.n(g),v=(a(1983),a(1984),a(1985)),E=a.n(v),f=a(86),y=a.n(f),w=a(5),D=a.n(w),O=a(19),j=a(20),k=a(290),x=a(53),N=a.n(x),A="[CALENDAR APP] GET EVENTS",P="[CALENDAR APP] OPEN NEW EVENT DIALOG",C="[CALENDAR APP] CLOSE NEW EVENT DIALOG",I="[CALENDAR APP] OPEN EDIT EVENT DIALOG",T="[CALENDAR APP] CLOSE EDIT EVENT DIALOG",L="[CALENDAR APP] ADD EVENT",S="[CALENDAR APP] UPDATE EVENT",z="[CALENDAR APP] REMOVE EVENT";function M(){var e=N.a.get("/api/calendar-app/events");return function(t){return e.then(function(e){return t({type:A,payload:e.data})})}}function V(e){return{type:P,data:e}}function F(){return{type:C}}function R(e){return{type:I,data:e}}function _(){return{type:T}}function G(e){return function(t,a){return N.a.post("/api/calendar-app/add-event",{newEvent:e}).then(function(e){return Promise.all([t({type:L})]).then(function(){return t(M())})})}}function W(e){return function(t,a){return N.a.post("/api/calendar-app/update-event",{event:e}).then(function(e){return Promise.all([t({type:S})]).then(function(){return t(M())})})}}function B(e){return function(t,a){return N.a.post("/api/calendar-app/remove-event",{eventId:e}).then(function(e){return Promise.all([t({type:z})]).then(function(){return t(M())})})}}var H={entities:[],eventDialog:{type:"new",props:{open:!1},data:null}},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:var a=t.payload.map(function(e){return Object(l.a)({},e,{start:new Date(e.start),end:new Date(e.end)})});return Object(l.a)({},e,{entities:a});case P:return Object(l.a)({},e,{eventDialog:{type:"new",props:{open:!0},data:Object(l.a)({},t.data)}});case C:return Object(l.a)({},e,{eventDialog:{type:"new",props:{open:!1},data:null}});case I:return Object(l.a)({},e,{eventDialog:{type:"edit",props:{open:!0},data:Object(l.a)({},t.data,{start:new Date(t.data.start),end:new Date(t.data.end)})}});case T:return Object(l.a)({},e,{eventDialog:{type:"edit",props:{open:!1},data:null}});default:return e}},U=Object(O.d)({events:J}),q=a(307),X=a(9),Y={id:q.a.generateGUID(),title:"",allDay:!0,start:new Date,end:new Date,desc:""},K=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).state=Object(l.a)({},Y),a.handleChange=function(e){a.setState(X.a.set(Object(l.a)({},a.state),e.target.name,"checkbox"===e.target.type?e.target.checked:e.target.value))},a.closeComposeDialog=function(){"edit"===a.props.eventDialog.type?a.props.closeEditEventDialog():a.props.closeNewEventDialog()},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){!e.eventDialog.props.open&&this.props.eventDialog.props.open&&("edit"===this.props.eventDialog.type&&this.props.eventDialog.data&&!X.a.isEqual(this.props.eventDialog.data,t)&&this.setState(Object(l.a)({},this.props.eventDialog.data)),"new"===this.props.eventDialog.type&&this.setState(Object(l.a)({},Y,this.props.eventDialog.data)))}},{key:"canBeSubmitted",value:function(){return this.state.title.length>0}},{key:"render",value:function(){var e=this,t=this.props,a=t.eventDialog,n=t.addEvent,r=t.updateEvent,i=t.removeEvent,o=y()(this.state.start).format(y.a.HTML5_FMT.DATETIME_LOCAL_SECONDS),s=y()(this.state.end).format(y.a.HTML5_FMT.DATETIME_LOCAL_SECONDS);return u.a.createElement(m.l,Object.assign({},a.props,{onClose:this.closeComposeDialog,fullWidth:!0,maxWidth:"xs"}),u.a.createElement(m.a,{position:"static"},u.a.createElement(m.tb,{className:"flex w-full"},u.a.createElement(m.vb,{variant:"subtitle1",color:"inherit"},"new"===a.type?"New Event":"Edit Event"))),u.a.createElement(m.n,{classes:{root:"p-16 pb-0 sm:p-24 sm:pb-0"}},u.a.createElement(m.sb,{id:"title",label:"Title",className:"mt-8 mb-16",InputLabelProps:{shrink:!0},inputProps:{max:s},name:"title",value:this.state.title,onChange:this.handleChange,variant:"outlined",autoFocus:!0,required:!0,fullWidth:!0}),u.a.createElement(m.y,{className:"mt-8 mb-16",label:"All Day",control:u.a.createElement(m.ib,{checked:this.state.allDay,id:"allDay",name:"allDay",onChange:this.handleChange})}),u.a.createElement(m.sb,{id:"start",name:"start",label:"Start",type:"datetime-local",className:"mt-8 mb-16",InputLabelProps:{shrink:!0},inputProps:{max:s},value:o,onChange:this.handleChange,variant:"outlined",fullWidth:!0}),u.a.createElement(m.sb,{id:"end",name:"end",label:"End",type:"datetime-local",className:"mt-8 mb-16",InputLabelProps:{shrink:!0},inputProps:{min:o},value:s,onChange:this.handleChange,variant:"outlined",fullWidth:!0}),u.a.createElement(m.sb,{className:"mt-8 mb-16",id:"desc",label:"Description",type:"text",name:"desc",value:this.state.desc,onChange:this.handleChange,multiline:!0,rows:5,variant:"outlined",fullWidth:!0})),"new"===a.type?u.a.createElement(m.m,{className:"justify-between pl-8 sm:pl-16"},u.a.createElement(m.c,{variant:"contained",color:"primary",onClick:function(){n(e.state),e.closeComposeDialog()},disabled:!this.canBeSubmitted()},"Add")):u.a.createElement(m.m,{className:"justify-between pl-8 sm:pl-16"},u.a.createElement(m.c,{variant:"contained",color:"primary",onClick:function(){r(e.state),e.closeComposeDialog()},disabled:!this.canBeSubmitted()}," Save"),u.a.createElement(m.H,{onClick:function(){i(e.state.id),e.closeComposeDialog()}},u.a.createElement(m.G,null,"delete"))))}}]),t}(d.Component);var Q=Object(j.b)(function(e){return{eventDialog:e.calendarApp.events.eventDialog}},function(e){return Object(O.c)({closeEditEventDialog:_,closeNewEventDialog:F,addEvent:G,updateEvent:W,removeEvent:B},e)})(K),Z=a(1886),$=a.n(Z),ee=a(1777),te=a(27),ae={month:{title:"Month",icon:"view_module"},week:{title:"Week",icon:"view_week"},work_week:{title:"Work week",icon:"view_array"},day:{title:"Day",icon:"view_day"},agenda:{title:"Agenda",icon:"view_agenda"}},ne=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"viewButtons",value:function(){var e=this,t=this.props.views,a=this.props.view;if(t.length>1)return t.map(function(t){return u.a.createElement(m.ub,{title:ae[t].title,key:t},u.a.createElement("div",null,u.a.createElement(p.d,{animation:"transition.expandIn",delay:500},u.a.createElement(m.H,{"aria-label":t,onClick:function(){return e.props.onView(t)},disabled:a===t},u.a.createElement(m.G,null,ae[t].icon)))))})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.mainThemeDark,n=e.label,r=e.date;return u.a.createElement(b.MuiThemeProvider,{theme:a},u.a.createElement("div",{className:D()(t.root,"flex h-200 min-h-200 relative",y()(r).format("MMM"))},u.a.createElement("div",{className:"flex flex-1 flex-col p-12 justify-between z-10 container"},u.a.createElement("div",{className:"flex flex-col items-center justify-between sm:flex-row"},u.a.createElement("div",{className:"flex items-center my-16 sm:mb-0"},u.a.createElement(p.d,{animation:"transition.expandIn",delay:300},u.a.createElement(m.G,{className:"text-32 mx-12"},"today")),u.a.createElement(p.d,{animation:"transition.slideLeftIn",delay:300},u.a.createElement(m.vb,{variant:"h6"},"Calendar"))),u.a.createElement("div",{className:"flex items-center"},u.a.createElement(m.ub,{title:"Today"},u.a.createElement(p.d,{animation:"transition.expandIn",delay:500},u.a.createElement(m.H,{"aria-label":"today",onClick:this.navigate.bind(null,ee.navigate.TODAY)},u.a.createElement(m.G,null,"today")))),this.viewButtons())),u.a.createElement(p.d,{delay:500},u.a.createElement("div",{className:"flex items-center justify-center"},u.a.createElement(m.ub,{title:"Previous"},u.a.createElement(m.H,{"aria-label":"Previous",onClick:this.navigate.bind(null,ee.navigate.PREVIOUS)},u.a.createElement(m.G,null,"chevron_left"))),u.a.createElement(m.vb,{variant:"h6"},n),u.a.createElement(m.ub,{title:"Next"},u.a.createElement(m.H,{"aria-label":"Next",onClick:this.navigate.bind(null,ee.navigate.NEXT)},u.a.createElement(m.G,null,"chevron_right"))))))))}}]),t}($.a);var re=Object(b.withStyles)(function(e){return{root:{backgroundImage:'url("../../assets/images/backgrounds/header-bg.png")',backgroundColor:"#FAFAFA",color:"#FFFFFF",backgroundSize:"cover",backgroundPosition:"0 50%",backgroundRepeat:"no-repeat","&:before":{content:"''",position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1,background:"rgba(0, 0, 0, 0.45)"},"&.Jan":{backgroundImage:"url('/assets/images/calendar/winter.jpg')",backgroundPosition:"0 85%"},"&.Feb":{backgroundImage:"url('/assets/images/calendar/winter.jpg')",backgroundPosition:"0 85%"},"&.Mar":{backgroundImage:"url('/assets/images/calendar/spring.jpg')",backgroundPosition:"0 40%"},"&.Apr":{backgroundImage:"url('/assets/images/calendar/spring.jpg')",backgroundPosition:"0 40%"},"&.May":{backgroundImage:"url('/assets/images/calendar/spring.jpg')",backgroundPosition:"0 40%"},"&.Jun":{backgroundImage:"url('/assets/images/calendar/summer.jpg')",backgroundPosition:"0 80%"},"&.Jul":{backgroundImage:"url('/assets/images/calendar/summer.jpg')",backgroundPosition:"0 80%"},"&.Aug":{backgroundImage:"url('/assets/images/calendar/summer.jpg')",backgroundPosition:"0 80%"},"&.Sep":{backgroundImage:"url('/assets/images/calendar/autumn.jpg')",backgroundPosition:"0 40%"},"&.Oct":{backgroundImage:"url('/assets/images/calendar/autumn.jpg')",backgroundPosition:"0 40%"},"&.Nov":{backgroundImage:"url('/assets/images/calendar/autumn.jpg')",backgroundPosition:"0 40%"},"&.Dec":{backgroundImage:"url('/assets/images/calendar/winter.jpg')",backgroundPosition:"0 85%"}}}},{withTheme:!0})(Object(te.a)(function(e){return{mainThemeDark:e.fuse.settings.mainThemeDark}})(ne)),ie=a(43),oe=h.a.momentLocalizer(y.a),se=E()(h.a),ce=Object.keys(h.a.Views).map(function(e){return h.a.Views[e]}),le=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).moveEvent=function(e){var t=e.event,n=e.start,r=e.end;a.props.updateEvent(Object(l.a)({},t,{start:n,end:r}))},a.resizeEvent=function(e){var t=e.event,n=e.start,r=e.end;delete t.type,a.props.updateEvent(Object(l.a)({},t,{start:n,end:r}))},a.headerEl=u.a.createRef(),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.getEvents()}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.events,r=t.openNewEventDialog,i=t.openEditEventDialog;return u.a.createElement("div",{className:D()(a.root,"flex flex-col flex-auto relative")},u.a.createElement("div",{ref:this.headerEl}),u.a.createElement(se,{className:"flex flex-1 container",selectable:!0,localizer:oe,events:n,onEventDrop:this.moveEvent,resizable:!0,onEventResize:this.resizeEvent,defaultView:h.a.Views.MONTH,defaultDate:new Date(2018,3,1),startAccessor:"start",endAccessor:"end",views:ce,step:60,showMultiDayTimes:!0,components:{toolbar:function(t){return e.headerEl.current?ie.createPortal(u.a.createElement(re,t),e.headerEl.current):null}},onSelectEvent:function(e){i(e)},onSelectSlot:function(e){return r({start:e.start.toLocaleString(),end:e.end.toLocaleString()})}}),u.a.createElement(p.d,{animation:"transition.expandIn",delay:500},u.a.createElement(m.v,{color:"secondary","aria-label":"add",className:a.addButton,onClick:function(){return r({start:new Date,end:new Date})}},u.a.createElement(m.G,null,"add"))),u.a.createElement(Q,null))}}]),t}(d.Component);t.default=Object(k.a)("calendarApp",U)(Object(b.withStyles)(function(e){return{root:{"& .rbc-header":{padding:"12px 6px",fontWeight:600,fontSize:14},"& .rbc-label":{padding:"8px 6px"},"& .rbc-today":{backgroundColor:"transparent"},"& .rbc-header.rbc-today, & .rbc-month-view .rbc-day-bg.rbc-today":{borderBottom:"2px solid "+e.palette.secondary.main+"!important"},"& .rbc-month-view, & .rbc-time-view, & .rbc-agenda-view":Object(l.a)(Object(c.a)({padding:24},e.breakpoints.down("sm"),{padding:16}),e.mixins.border(0)),"& .rbc-agenda-view table":Object(l.a)({},e.mixins.border(1),{"& thead > tr > th":Object(l.a)({},e.mixins.borderBottom(0)),"& tbody > tr > td":{padding:"12px 6px","& + td":Object(l.a)({},e.mixins.borderLeft(1))}}),"& .rbc-time-view":{"& .rbc-time-header":Object(l.a)({},e.mixins.border(1)),"& .rbc-time-content":Object(l.a)({flex:"0 1 auto"},e.mixins.border(1))},"& .rbc-month-view":{"& > .rbc-row":Object(l.a)({},e.mixins.border(1)),"& .rbc-month-row":Object(l.a)({},e.mixins.border(1),{borderWidth:"0 1px 1px 1px!important",minHeight:128}),"& .rbc-header + .rbc-header":Object(l.a)({},e.mixins.borderLeft(1)),"& .rbc-header":Object(l.a)({},e.mixins.borderBottom(0)),"& .rbc-day-bg + .rbc-day-bg":Object(l.a)({},e.mixins.borderLeft(1))},"& .rbc-day-slot .rbc-time-slot":Object(l.a)({},e.mixins.borderTop(1),{opacity:.5}),"& .rbc-time-header > .rbc-row > * + *":Object(l.a)({},e.mixins.borderLeft(1)),"& .rbc-time-content > * + * > *":Object(l.a)({},e.mixins.borderLeft(1)),"& .rbc-day-bg + .rbc-day-bg":Object(l.a)({},e.mixins.borderLeft(1)),"& .rbc-time-header > .rbc-row:first-child":Object(l.a)({},e.mixins.borderBottom(1)),"& .rbc-timeslot-group":Object(l.a)({minHeight:64},e.mixins.borderBottom(1)),"& .rbc-date-cell":{padding:8,fontSize:16,fontWeight:400,opacity:.5,"& > a":{color:"inherit"}},"& .rbc-event":{borderRadius:4,padding:"4px 8px",backgroundColor:e.palette.primary.dark,color:e.palette.primary.contrastText,boxShadow:e.shadows[0],transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut,position:"relative","&:hover":{boxShadow:e.shadows[2]}},"& .rbc-row-segment":{padding:"0 4px 4px 4px"},"& .rbc-off-range-bg":{backgroundColor:"light"===e.palette.type?"rgba(0,0,0,0.03)":"rgba(0,0,0,0.16)"},"& .rbc-show-more":{color:e.palette.secondary.main,background:"transparent"},"& .rbc-addons-dnd .rbc-addons-dnd-resizable-month-event":{position:"static"},"& .rbc-addons-dnd .rbc-addons-dnd-resizable-month-event .rbc-addons-dnd-resize-month-event-anchor:first-child":{left:0,top:0,bottom:0,height:"auto"},"& .rbc-addons-dnd .rbc-addons-dnd-resizable-month-event .rbc-addons-dnd-resize-month-event-anchor:last-child":{right:0,top:0,bottom:0,height:"auto"}},addButton:{position:"absolute",right:12,top:172,zIndex:99}}},{withTheme:!0})(Object(j.b)(function(e){return{events:e.calendarApp.events.entities}},function(e){return Object(O.c)({getEvents:M,openNewEventDialog:V,openEditEventDialog:R,updateEvent:W},e)})(le)))}}]);